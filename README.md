# AutoWeb 工作流编辑器

AutoWeb工作流编辑器是一个基于Vue 3和Vue Flow的现代化工作流设计工具，支持可视化的工作流设计和自动化任务编排。

**目前功能非常不完善，欢迎感兴趣的开发者一起参与开发，欢迎star，共同完善这个项目，为网页自动化贡献一份力量**

本仓库包含自动化代码（Taskflow）和工作流执行引擎代码（Workflow）
前端代码位于https://github.com/hc-tec/autoweb-frontend

## 功能特性

### 1. 工作流设计
- 可视化节点拖拽和连接
- 支持多种节点类型（基础节点、复合节点、自定义节点）
- 智能节点布局和自动对齐
- 支持节点分组和嵌套
- 支持节点属性编辑和配置

### 2. 节点系统
- 动态输入节点：用于接收工作流输入参数
- 动态输出节点：用于定义工作流输出结果
- 代码节点：支持Python代码执行
- 循环节点：支持数组遍历和条件循环
- 条件节点：支持if-else逻辑分支
- 选择器节点：支持多条件分支选择

### 3. 数据流管理
- 智能变量引用系统
- 自动变量类型推断
- 变量引用格式标准化
- 支持数组和对象类型的数据传递

### 4. 工作流管理
- 工作流元数据编辑（标题、描述）
- 工作流导入导出（JSON格式）
- 工作流验证和错误检查
- 工作流执行和调试

### 5. 用户界面
- 现代化UI设计
- 响应式布局
- 暗色/亮色主题支持
- 快捷键支持（如Delete删除选中元素）

## 技术架构

### 核心技术栈
- Vue 3：使用Composition API构建
- Vue Flow：流程图可视化
- Ant Design Vue：UI组件库
- TypeScript：类型支持

### 主要模块
1. 工作流编辑器核心（WorkflowEditor）
   - 节点管理
   - 边管理
   - 布局计算
   - 数据转换

2. 节点系统（NodeFactory）
   - 节点创建
   - 节点类型定义
   - 节点属性管理

3. 工作流工具（WorkflowUtils）
   - JSON序列化/反序列化
   - 工作流验证
   - 节点排序
   - 引用格式处理

4. 组件系统
   - 自定义节点组件
   - 复合节点组件
   - 属性面板
   - 控制栏

## 使用说明

### 1. 安装依赖
```bash
npm install
```

### 2. 开发环境运行
```bash
npm run dev
```

### 3. 生产环境构建
```bash
npm run build
```

### 4. 基本操作
- 添加节点：从左侧节点面板拖拽节点到画布
- 连接节点：从一个节点的输出端口拖拽到另一个节点的输入端口
- 编辑节点：点击节点打开属性面板
- 删除节点：选中节点后按Delete键
- 导出工作流：点击工具栏的导出按钮

### 5. 工作流格式
工作流以JSON格式存储，包含以下主要部分：
```json
{
  "version": "1.0.0",
  "module_id": "workflow_xxx",
  "module_type": "workflow",
  "modules": [...],
  "meta": {
    "title": "工作流标题",
    "description": "工作流描述"
  },
  "inputs": {
    "input_defs": [...],
    "input_parameters": [...]
  },
  "outputs": {
    "output_defs": [...]
  }
}
```

## 开发指南

### 1. 添加新节点类型
1. 在`nodeTypes.json`中定义节点类型
2. 在`NodeFactory.js`中添加节点创建逻辑
3. 创建对应的节点组件

### 2. 自定义节点组件
节点组件应包含：
- 输入/输出端口定义
- 节点属性配置
- 节点样式定义

### 3. 工作流扩展
- 支持自定义工作流验证规则
- 支持自定义节点排序策略
- 支持自定义数据转换逻辑

## 注意事项

1. 节点ID唯一性
   - 确保每个节点都有唯一的ID
   - 避免ID冲突

2. 数据格式
   - 遵循标准的数据格式定义
   - 注意变量引用的正确性

3. 性能优化
   - 大量节点时注意性能
   - 合理使用节点缓存

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 联系方式

2598772546@qq.com